{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.object.define-properties.js","webpack:///./src/libs/validator.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/views/login/components/forgetPassword/components/changePassword.vue?3830","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js","webpack:///./src/views/login/components/forgetPassword/components/changePassword.vue?3ff9","webpack:///src/views/login/components/forgetPassword/components/changePassword.vue","webpack:///./src/views/login/components/forgetPassword/components/changePassword.vue?82d9","webpack:///./src/views/login/components/forgetPassword/components/changePassword.vue"],"names":["$","DESCRIPTORS","defineProperties","target","stat","forced","sham","strategies","isNonEmpty","value","errorMsg","isNumber","test","isEmail","isPhone","isGateway","Validator","this","cache","prototype","add","rules","data","rule","i","required","validate","push","type","message","length","start","console","log","formValidate","formData","Promise","resolve","reject","validator","Object","keys","forEach","item","Toast","ownKeys","object","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","apply","_objectSpread2","arguments","source","key","defineProperty","getOwnPropertyDescriptors","_defineProperty","obj","configurable","writable","toIndexedObject","getOwnPropertyDescriptorModule","createProperty","descriptor","O","f","result","index","undefined","fails","nativeGetOwnPropertyDescriptor","FAILS_ON_PRIMITIVES","FORCED","it","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","model","callback","$$v","$set","expression","class","isDisButton","staticStyle","loading","on","handleFrom","staticRenderFns","myrey","password","password1","password2","methods","val","computed","username","$store","state","user","userEmail","component"],"mappings":"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","file":"js/chunk-12c78abb.cb717c77.js","sourcesContent":["var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineProperties = require('../internals/object-define-properties');\n\n// `Object.defineProperties` method\n// https://tc39.github.io/ecma262/#sec-object.defineproperties\n$({ target: 'Object', stat: true, forced: !DESCRIPTORS, sham: !DESCRIPTORS }, {\n  defineProperties: defineProperties\n});\n","// 表单验证函数\r\nimport { Toast } from 'vant'\r\nvar strategies = {\r\n    isNonEmpty: function (value, errorMsg) { // 不为空\r\n\t  if (value === '') {\r\n\t\treturn errorMsg;\r\n\t  }\r\n    },\r\n    isNumber: function(value, errorMsg) {  // 为正整数\r\n\t if (!/^[+]{0,1}(\\d+)$/.test(value)) {\r\n\t    return errorMsg;\r\n\t  }\r\n\t},\r\n\tisEmail: function(value, errorMsg) {  // 为邮箱\r\n\t  if (!/^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/.test(value)) {\r\n\t     return errorMsg;\r\n\t   }\r\n\t},\r\n\tisPhone: function(value, errorMsg) {  // 为手机话号码\r\n\t  if (!/^[1][3,4,5,7,8][0-9]{9}$/.test(value)) {\r\n\t     return errorMsg;\r\n\t   }\r\n\t},\r\n\tisGateway: function(value, errorMsg) {  // 为网关格式\r\n\t  if (!/^192\\.168(\\.(\\d|([1-9]\\d)|(1\\d{2})|(2[0-4]\\d)|(25[0-5]))){2}$/.test(value)) {\r\n\t     return errorMsg;\r\n\t   }\r\n\t},\r\n}\r\n\r\nvar Validator = function(){\r\n\tthis.cache = [];\r\n}\r\n\r\nValidator.prototype.add = function(value, rules, data){\r\n\tfor(var i = 0; i < rules.length; i++){\r\n\t\tlet rule = rules[i];\r\n\t\tif(rule.required){\r\n\t\t\tif(rule.validate){\r\n\t\t\t\tthis.cache.push(function(){\r\n\t\t\t\t\treturn rule.validate(value, data)\r\n\t\t\t\t})\r\n\t\t\t}else if(rule.type){\r\n\t\t\t\tthis.cache.push(function(){\r\n\t\t\t\t\treturn strategies[rule.type](value, rule.message)\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tthis.cache.push(function(){\r\n\t\t\t\t\treturn strategies.isNonEmpty(value, rule.message)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}else if(rule.type){\r\n\t\t\tif(rule.required == false){\r\n\t\t\t\tif(value != ''){\r\n\t\t\t\t  this.cache.push(function(){\r\n\t\t\t\t  \treturn strategies[rule.type](value, rule.message)\r\n\t\t\t\t  })\t\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.cache.push(function(){\r\n\t\t\t\t\treturn strategies[rule.type](value, rule.message)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}else if(rule.validate){\r\n\t\t\tif(rule.required == false){\r\n\t\t\t\tif(value != ''){\r\n\t\t\t\t  this.cache.push(function(){\r\n\t\t\t\t  \treturn rule.validate(value, data)\r\n\t\t\t\t  })\t\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.cache.push(function(){\r\n\t\t\t\t\treturn rule.validate(value, data)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nValidator.prototype.start = function(){\r\n\tfor(var i = 0; i < this.cache.length; i++){\r\n\t\tlet errorMsg  = this.cache[i]();\r\n\t\tif(errorMsg){\r\n\t\t\tconsole.log(errorMsg)\r\n\t\t\treturn errorMsg;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nlet formValidate = function(formData, rules){\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tlet validator = new Validator();\r\n\t\t\tObject.keys(rules).forEach((item) => {\r\n\t\t\t\tvalidator.add(formData[item], rules[item], formData);\r\n\t\t\t})\r\n\t\t\tlet errorMsg  = validator.start();\r\n\t\t\tif(errorMsg){\r\n\t\t\t\tToast(errorMsg);\r\n\t\t\t\tresolve(false);\r\n\t\t\t}else{\r\n\t\t\t\tresolve(true);\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\t\r\n\r\nexport default formValidate","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePassword.vue?vue&type=style&index=0&id=a4736102&scoped=scoped&lang=less&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePassword.vue?vue&type=style&index=0&id=a4736102&scoped=scoped&lang=less&\"","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"setNewBox\"},[_c('h2',[_vm._v(\"更改密码\")]),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"原始密码\")]),_c('div',[_c('van-field',{attrs:{\"clearable\":\"\",\"type\":\"password\",\"left\":\"\",\"placeholder\":\"请输入原始密码\"},model:{value:(_vm.formData.password),callback:function ($$v) {_vm.$set(_vm.formData, \"password\", $$v)},expression:\"formData.password\"}})],1)]),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"新密码\")]),_c('div',[_c('van-field',{attrs:{\"clearable\":\"\",\"type\":\"password\",\"left\":\"\",\"placeholder\":\"请输入新密码\"},model:{value:(_vm.formData.password1),callback:function ($$v) {_vm.$set(_vm.formData, \"password1\", $$v)},expression:\"formData.password1\"}})],1)]),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"确认密码\")]),_c('div',[_c('van-field',{attrs:{\"clearable\":\"\",\"type\":\"password\",\"left\":\"\",\"placeholder\":\"请再次输入密码\"},model:{value:(_vm.formData.password2),callback:function ($$v) {_vm.$set(_vm.formData, \"password2\", $$v)},expression:\"formData.password2\"}})],1)]),_c('div',{staticClass:\"footer\"},[_c('van-button',{class:_vm.isDisButton?'entityDisBtnDefault':'entityBtnDefault',staticStyle:{\"border\":\"none\"},attrs:{\"disabled\":_vm.isDisButton,\"type\":\"info\",\"size\":\"large\",\"loading\":_vm.loading},on:{\"click\":_vm.handleFrom}},[_vm._v(\"完成\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"setNewBox\">\r\n    <h2>更改密码</h2>\r\n    <div class=\"item\">\r\n      <h4>原始密码</h4>\r\n      <div>\r\n        <van-field\r\n          clearable\r\n          type=\"password\"\r\n          v-model=\"formData.password\"\r\n          left\r\n          placeholder=\"请输入原始密码\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"item\">\r\n      <h4>新密码</h4>\r\n      <div>\r\n        <van-field\r\n          clearable\r\n          type=\"password\"\r\n          v-model=\"formData.password1\"\r\n          left\r\n          placeholder=\"请输入新密码\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"item\">\r\n      <h4>确认密码</h4>\r\n      <div>\r\n        <van-field\r\n          clearable\r\n          type=\"password\"\r\n          v-model=\"formData.password2\"\r\n          left\r\n          placeholder=\"请再次输入密码\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"footer\">\r\n      <van-button\r\n        :disabled=\"isDisButton\"\r\n        style=\"border: none;\"\r\n        :class=\"isDisButton?'entityDisBtnDefault':'entityBtnDefault'\"\r\n        type=\"info\"\r\n        size=\"large\"\r\n        @click=\"handleFrom\"\r\n        :loading=\"loading\"\r\n      >完成</van-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapActions } from \"vuex\";\r\nimport { Toast } from \"vant\";\r\nimport formValidate from \"@/libs/validator\";\r\nimport { changePasswordapi } from \"@/api/user.js\";\r\nexport default {\r\n  data() {\r\n    const validatePassword = value => {\r\n      var myrey = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;\r\n      if (value == \"\") {\r\n        return \"原始密码不能为空\";\r\n      } else if (!myrey.test(value)) {\r\n        return \"请输入6~20位数字和字母组合\";\r\n      }\r\n    };\r\n    const validatePassword1 = value => {\r\n      var myrey = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;\r\n      if (value == \"\") {\r\n        return \"密码不能为空\";\r\n      } else if (!myrey.test(value)) {\r\n        return \"请输入6~20位数字和字母组合\";\r\n      }\r\n    };\r\n    const validatePassword2 = (value, data) => {\r\n      if (value == \"\") {\r\n        return \"请再次输入密码\";\r\n      } else if (value != data.password1) {\r\n        return \"两次输入密码不一致\";\r\n      }\r\n    };\r\n    return {\r\n      loading: false,\r\n      formData: {\r\n        password: \"\",\r\n        password1: \"\",\r\n        password2: \"\"\r\n      },\r\n      rules: {\r\n        password: [{ required: true, validate: validatePassword }],\r\n        password1: [{ required: true, validate: validatePassword1 }],\r\n        password2: [{ required: true, validate: validatePassword2 }]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions([\"loginOut\"]),\r\n    handleFrom() {\r\n      formValidate(this.formData, this.rules).then(val => {\r\n        if (val) {\r\n          const password = this.formData.password;\r\n          const password1 = this.formData.password1;\r\n          const username = this.username;\r\n          this.loading = true;\r\n          changePasswordapi(username, password1, password)\r\n            .then(() => {\r\n              this.loading = false;\r\n              Toast.success(\"密码修改成功\");\r\n              this.loginOut().then(() => {\r\n                this.$router.push({\r\n                  path: \"/login\"\r\n                });\r\n              });\r\n            })\r\n            .catch(err => {\r\n              this.$toast(err.data.error);\r\n              this.loading = false;\r\n            });\r\n        }\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    username() {\r\n      return this.$store.state.user.userEmail;\r\n    },\r\n    isDisButton() {\r\n      return (\r\n        this.formData.password == \"\" ||\r\n        this.formData.password1 == \"\" ||\r\n        this.formData.password2 == \"\"\r\n      );\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped=\"scoped\" lang=\"less\">\r\n.setNewBox {\r\n  display: block;\r\n  height: 100%;\r\n  width: 100%;\r\n  background: #ffffff;\r\n  padding: 25.35px 9.75px;\r\n  box-sizing: border-box;\r\n  .item {\r\n    & > div {\r\n      border-bottom: 1px solid #c6cbd4;\r\n      margin-bottom: 11.25px;\r\n      .code {\r\n        font-size: 12px;\r\n        font-weight: 500;\r\n        color: rgba(75, 116, 255, 1);\r\n      }\r\n    }\r\n    .loading {\r\n      width: 100%;\r\n      height: 22.5px;\r\n      display: flex;\r\n      align-items: center;\r\n    }\r\n  }\r\n  .footer {\r\n    margin-top: 37.5px;\r\n    display: block;\r\n  }\r\n}\r\nh2,\r\nh4 {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\nh2 {\r\n  font-size: 20px;\r\n  font-weight: 500;\r\n  color: #020202;\r\n  margin-bottom: 19.5px;\r\n}\r\nh4 {\r\n  font-size: 12px;\r\n  font-weight: 400;\r\n  color: rgba(108, 114, 124, 1);\r\n  margin-bottom: 9.75px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./changePassword.vue?vue&type=template&id=a4736102&scoped=true&\"\nimport script from \"./changePassword.vue?vue&type=script&lang=js&\"\nexport * from \"./changePassword.vue?vue&type=script&lang=js&\"\nimport style0 from \"./changePassword.vue?vue&type=style&index=0&id=a4736102&scoped=scoped&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a4736102\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}