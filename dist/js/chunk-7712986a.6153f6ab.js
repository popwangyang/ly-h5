(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7712986a"],{"455d":function(t,e,a){"use strict";var s=a("d399"),r={isNonEmpty:function(t,e){if(""===t)return e},isNumber:function(t,e){if(!/^[+]{0,1}(\d+)$/.test(t))return e},isEmail:function(t,e){if(!/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(t))return e},isPhone:function(t,e){if(!/^[1][3,4,5,7,8][0-9]{9}$/.test(t))return e},isGateway:function(t,e){if(!/^192\.168(\.(\d|([1-9]\d)|(1\d{2})|(2[0-4]\d)|(25[0-5]))){2}$/.test(t))return e},isMac:function(t,e){if(!/^[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}$/.test(t))return e}},n=function(){this.cache=[]};n.prototype.add=function(t,e,a){for(var s=0;s<e.length;s++){let n=e[s];n.required?n.validate?this.cache.push((function(){return n.validate(t,a)})):n.type?this.cache.push((function(){return r[n.type](t,n.message)})):this.cache.push((function(){return r.isNonEmpty(t,n.message)})):n.type?0==n.required?""!=t&&this.cache.push((function(){return r[n.type](t,n.message)})):this.cache.push((function(){return r[n.type](t,n.message)})):n.validate&&(0==n.required?""!=t&&this.cache.push((function(){return n.validate(t,a)})):this.cache.push((function(){return n.validate(t,a)})))}},n.prototype.start=function(){for(var t=0;t<this.cache.length;t++){let e=this.cache[t]();if(e)return console.log(e),e}};let o=function(t,e){return new Promise((a,r)=>{let o=new n;Object.keys(e).forEach(a=>{o.add(t[a],e[a],t)});let i=o.start();i?(Object(s["a"])(i),a(!1)):a(!0)})};e["a"]=o},9939:function(t,e,a){},a89a:function(t,e,a){"use strict";var s=a("9939"),r=a.n(s);r.a},c24f:function(t,e,a){"use strict";a.d(e,"f",(function(){return r})),a.d(e,"c",(function(){return n})),a.d(e,"h",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"e",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"d",(function(){return c})),a.d(e,"g",(function(){return l}));var s=a("66df");const r=t=>s["a"].request({url:"/cperm/users/user_type",params:t,method:"get"}),n=t=>s["a"].request({url:"/cperm/send_code",method:"post",data:t}),o=t=>s["a"].request({url:"/cperm/verify_code",method:"post",data:t}),i=t=>s["a"].request({url:"/cperm/user/change_password",method:"post",data:t}),u=()=>s["a"].request({url:"/cperm/users/self",method:"get"}),d=(t,e,a=null)=>s["a"].request({url:"/cperm/user/change_password",method:"post",data:{username:t,password:e,old_password:a}}),c=t=>s["a"].request({url:`/ktv/place/ktv-upgrade/${t}`,method:"get"}),l=t=>s["a"].request({url:`/cperm/vods/${t}`,method:"get"})},f719:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setNewBox"},[a("h2",[t._v("更改密码")]),a("div",{staticClass:"item"},[a("h4",[t._v("原始密码")]),a("div",[a("van-field",{attrs:{clearable:"",type:"password",left:"",placeholder:"请输入原始密码"},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1)]),a("div",{staticClass:"item"},[a("h4",[t._v("新密码")]),a("div",[a("van-field",{attrs:{clearable:"",type:"password",left:"",placeholder:"请输入新密码"},model:{value:t.formData.password1,callback:function(e){t.$set(t.formData,"password1",e)},expression:"formData.password1"}})],1)]),a("div",{staticClass:"item"},[a("h4",[t._v("确认密码")]),a("div",[a("van-field",{attrs:{clearable:"",type:"password",left:"",placeholder:"请再次输入密码"},model:{value:t.formData.password2,callback:function(e){t.$set(t.formData,"password2",e)},expression:"formData.password2"}})],1)]),a("div",{staticClass:"footer"},[a("van-button",{class:t.isDisButton?"entityDisBtnDefault":"entityBtnDefault",staticStyle:{border:"none"},attrs:{disabled:t.isDisButton,type:"info",size:"large",loading:t.loading},on:{click:t.handleFrom}},[t._v("完成")])],1)])},r=[],n=a("2f62"),o=a("d399"),i=a("455d"),u=a("c24f"),d={data(){const t=t=>{var e=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;return""==t?"原始密码不能为空":e.test(t)?void 0:"请输入6~20位数字和字母组合"},e=t=>{var e=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;return""==t?"密码不能为空":e.test(t)?void 0:"请输入6~20位数字和字母组合"},a=(t,e)=>""==t?"请再次输入密码":t!=e.password1?"两次输入密码不一致":void 0;return{loading:!1,formData:{password:"",password1:"",password2:""},rules:{password:[{required:!0,validate:t}],password1:[{required:!0,validate:e}],password2:[{required:!0,validate:a}]}}},methods:{...Object(n["b"])(["loginOut"]),handleFrom(){Object(i["a"])(this.formData,this.rules).then(t=>{if(t){const t=this.formData.password,e=this.formData.password1,a=this.username;this.loading=!0,Object(u["b"])(a,e,t).then(()=>{this.loading=!1,o["a"].success("密码修改成功"),this.loginOut().then(()=>{this.$router.push({path:"/login"})})}).catch(t=>{this.$toast(t.data.error),this.loading=!1})}})}},computed:{username(){return this.$store.state.user.userEmail},isDisButton(){return""==this.formData.password||""==this.formData.password1||""==this.formData.password2}}},c=d,l=(a("a89a"),a("2877")),f=Object(l["a"])(c,s,r,!1,null,"a4736102",null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-7712986a.6153f6ab.js.map