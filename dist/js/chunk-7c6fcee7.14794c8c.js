(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c6fcee7"],{1013:function(t,e,s){},"77b8":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"homeBox"},[s("div",{staticClass:"routerView theme"},[s("transition",{attrs:{name:t.transitionName}},[s("keep-alive",{attrs:{include:t.keepAliveList}},[s("router-view")],1)],1)],1),s("BottomBar",{directives:[{name:"show",rawName:"v-show",value:t.showTab,expression:"showTab"}],on:{goView:t.goView}})],1)},o=[],i=s("2f62"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tabBarBox"},[s("van-tabbar",{attrs:{route:"","active-color":t.activeColor,"inactive-color":"#B7B7B7"}},t._l(t.dataList,(function(e,n){return s("van-tabbar-item",{key:n,attrs:{info:e.info?e.info:"",to:e.path},scopedSlots:t._u([{key:"icon",fn:function(t){return s("img",{attrs:{src:t.active?e.active:e.inactive}})}}],null,!0)},[s("span",{staticClass:"bottonTabText"},[t._v(t._s(e.text))])])})),1)],1)},r=[],c={computed:{dataList(){return this.$store.state.app.theme.tabBottoms},activeColor(){return this.$store.state.app.theme.color}}},u=c,l=(s("790d"),s("2877")),d=Object(l["a"])(u,a,r,!1,null,"9a8fded8",null),h=d.exports,m=s("ba41"),b=s("66df"),p=s("9320"),f=s.n(p);s("c276");class v extends f.a{constructor(t){super(t),this.subscribeKeys=[],this.init()}init(){window.onbeforeunload=()=>{this.disconnect()},this.on("connect",t=>{console.log("连接成功",t)}),this.on("disconnect",t=>{console.log("断开连接",t)}),this.on("error",t=>{console.log("错误连接",t)}),this.connect()}addListeners(t,e){this.hasKey(t)||this.subscribeKeys.push(t),this.subscribe(t,e)}removeListeners(t,e){this.hasKey(t)&&(this.unsubscribe(t),this.subscribeKeys.splice(this.subscribeKeys.indexOf(t),1))}hasKey(t){return this.subscribeKeys.indexOf(t)>-1}}let g=null;const w=t=>new Promise((e,s)=>{console.log(g),null==g?Object(m["b"])(t).then(t=>{const s=t.data.access_token,n=t.data.timestamp,o=t.data.user;g=new v({url:b["c"],user:o,timestamp:n,token:s}),e(g)}):("disconnected"==g._status&&g.connect(),e(g))});var k=s("ea31"),$={components:{BottomBar:h},computed:{keepAliveList(){return this.$store.state.app.keepAliveList},showTab(){return!(!this.$route.meta||!this.$route.meta.showBottomTab)}},data(){return{transitionName:"slide-none",socketConent:null}},watch:{$route(t,e){document.title=t.meta.title;const s=t.path.split("/").length,n=e.path.split("/").length;this.transitionName=s==n?"slide-none":s<n?"slide-right":"slide-left"}},methods:{...Object(i["b"])(["getUnRead"]),goView(t){this.$router.push({name:t})}},created(){this.$store.commit("SET_THEME",this.$store.state.user.usertype)},mounted(){let t=document.getElementsByTagName("body")[0];t.className=this.$store.state.app.className;let e=this.$store.state.user.ktv_id,s=this.$store.state.user.user_id;w({user_id:s}).then(t=>{this.socketConent=t,e&&t.addListeners(`package:${e}`,t=>{let s={ktv_id_list:e,package_status:2};Object(k["b"])(s).then(t=>{this.$store.commit("setUndelivered",t.data.count)})}),t.addListeners(`msg:${s}`,t=>{console.log(t)})})},destroyed(){let t=document.getElementsByTagName("body")[0];t.className="themea",null!=this.socketConent&&this.socketConent.disconnect()}},_=$,y=(s("e897"),s("9c76"),Object(l["a"])(_,n,o,!1,null,"72d661e7",null));e["default"]=y.exports},"790d":function(t,e,s){"use strict";var n=s("1013"),o=s.n(n);o.a},"7b7a":function(t,e,s){},"9c76":function(t,e,s){"use strict";var n=s("dfd9"),o=s.n(n);o.a},dfd9:function(t,e,s){},e897:function(t,e,s){"use strict";var n=s("7b7a"),o=s.n(n);o.a},ea31:function(t,e,s){"use strict";s.d(e,"b",(function(){return o})),s.d(e,"c",(function(){return i})),s.d(e,"a",(function(){return a}));var n=s("66df");const o=t=>n["b"].request({url:"/order/info",params:t,method:"get"}),i=t=>{let e=t.id;return delete t.id,n["b"].request({url:`/order/package/${e}`,data:t,method:"patch"})},a=t=>n["b"].request({url:`/order/info/${t}`,method:"get"})}}]);
//# sourceMappingURL=chunk-7c6fcee7.14794c8c.js.map