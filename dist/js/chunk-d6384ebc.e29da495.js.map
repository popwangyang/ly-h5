{"version":3,"sources":["webpack:///./src/views/login/components/forgetPassword/components/changePassword.vue?3e86","webpack:///./src/libs/validator.js","webpack:///./src/views/login/components/forgetPassword/components/changePassword.vue?bf08","webpack:///src/views/login/components/forgetPassword/components/changePassword.vue","webpack:///./src/views/login/components/forgetPassword/components/changePassword.vue?82d9","webpack:///./src/views/login/components/forgetPassword/components/changePassword.vue"],"names":["strategies","isNonEmpty","value","errorMsg","isNumber","test","isEmail","isPhone","isGateway","isMac","Validator","this","cache","prototype","add","rules","data","i","length","rule","required","validate","push","type","message","start","console","log","formValidate","formData","Promise","resolve","reject","validator","Object","keys","forEach","item","Toast","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","model","callback","$$v","$set","expression","class","isDisButton","staticStyle","loading","on","handleFrom","staticRenderFns","validatePassword","myrey","validatePassword1","validatePassword2","password","password1","password2","methods","val","username","computed","$store","state","user","userEmail","component"],"mappings":"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","file":"js/chunk-d6384ebc.e29da495.js","sourcesContent":["import mod from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePassword.vue?vue&type=style&index=0&id=2f25d99a&scoped=scoped&lang=less&\"; export default mod; export * from \"-!../../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePassword.vue?vue&type=style&index=0&id=2f25d99a&scoped=scoped&lang=less&\"","// 表单验证函数\nimport { Toast } from 'vant'\nvar strategies = {\n    isNonEmpty: function (value, errorMsg) { // 不为空\n\t  if (value === '') {\n\t\treturn errorMsg;\n\t  }\n    },\n    isNumber: function(value, errorMsg) {  // 为正整数\n\t if (!/^[+]{0,1}(\\d+)$/.test(value)) {\n\t    return errorMsg;\n\t  }\n\t},\n\tisEmail: function(value, errorMsg) {  // 为邮箱\n\t  if (!/^([a-zA-Z]|[0-9])(\\w|\\-)+@[a-zA-Z0-9]+\\.([a-zA-Z]{2,4})$/.test(value)) {\n\t     return errorMsg;\n\t   }\n\t},\n\tisPhone: function(value, errorMsg) {  // 为手机话号码\n\t  if (!/^[1][3,4,5,7,8][0-9]{9}$/.test(value)) {\n\t     return errorMsg;\n\t   }\n\t},\n\tisGateway: function(value, errorMsg) {  // 为网关格式\n\t  if (!/^192\\.168(\\.(\\d|([1-9]\\d)|(1\\d{2})|(2[0-4]\\d)|(25[0-5]))){2}$/.test(value)) {\n\t     return errorMsg;\n\t   }\n\t},\n\tisMac: function(value, errorMsg) {  // Mac地址格式验证\n\t\tif (!/^[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}:[A-Fa-f\\d]{2}$/.test(value)) {\n\t\t   return errorMsg;\n\t\t }\n\t}\n}\n\nvar Validator = function(){\n\tthis.cache = [];\n}\n\nValidator.prototype.add = function(value, rules, data){\n\tfor(var i = 0; i < rules.length; i++){\n\t\tlet rule = rules[i];\n\t\tif(rule.required){\n\t\t\tif(rule.validate){\n\t\t\t\tthis.cache.push(function(){\n\t\t\t\t\treturn rule.validate(value, data)\n\t\t\t\t})\n\t\t\t}else if(rule.type){\n\t\t\t\tthis.cache.push(function(){\n\t\t\t\t\treturn strategies[rule.type](value, rule.message)\n\t\t\t\t})\n\t\t\t}else{\n\t\t\t\tthis.cache.push(function(){\n\t\t\t\t\treturn strategies.isNonEmpty(value, rule.message)\n\t\t\t\t})\n\t\t\t}\n\t\t}else if(rule.type){\n\t\t\tif(rule.required == false){\n\t\t\t\tif(value != '' && value != null){\n\t\t\t\t  this.cache.push(function(){\n\t\t\t\t  \treturn strategies[rule.type](value, rule.message)\n\t\t\t\t  })\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.cache.push(function(){\n\t\t\t\t\treturn strategies[rule.type](value, rule.message)\n\t\t\t\t})\n\t\t\t}\n\t\t}else if(rule.validate){\n\t\t\tif(rule.required == false){\n\t\t\t\tif(value != ''){\n\t\t\t\t  this.cache.push(function(){\n\t\t\t\t  \treturn rule.validate(value, data)\n\t\t\t\t  })\t\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.cache.push(function(){\n\t\t\t\t\treturn rule.validate(value, data)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n}\n\nValidator.prototype.start = function(){\n\tfor(var i = 0; i < this.cache.length; i++){\n\t\tlet errorMsg  = this.cache[i]();\n\t\tif(errorMsg){\n\t\t\tconsole.log(errorMsg)\n\t\t\treturn errorMsg;\n\t\t}\n\t}\n}\n\nlet formValidate = function(formData, rules){\n\treturn new Promise((resolve, reject) => {\n\t\tlet validator = new Validator();\n\t\t\tObject.keys(rules).forEach((item) => {\n\t\t\t\tvalidator.add(formData[item], rules[item], formData);\n\t\t\t})\n\t\t\tlet errorMsg  = validator.start();\n\t\t\tif(errorMsg){\n\t\t\t\tToast(errorMsg);\n\t\t\t\tresolve(false);\n\t\t\t}else{\n\t\t\t\tresolve(true);\n\t\t\t}\n\t\t})\n\t}\n\t\n\nexport default formValidate","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"setNewBox\"},[_c('h2',[_vm._v(\"更改密码\")]),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"原始密码\")]),_c('div',[_c('van-field',{attrs:{\"clearable\":\"\",\"type\":\"password\",\"left\":\"\",\"placeholder\":\"请输入原始密码\"},model:{value:(_vm.formData.password),callback:function ($$v) {_vm.$set(_vm.formData, \"password\", $$v)},expression:\"formData.password\"}})],1)]),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"新密码\")]),_c('div',[_c('van-field',{attrs:{\"clearable\":\"\",\"type\":\"password\",\"left\":\"\",\"placeholder\":\"请输入新密码\"},model:{value:(_vm.formData.password1),callback:function ($$v) {_vm.$set(_vm.formData, \"password1\", $$v)},expression:\"formData.password1\"}})],1)]),_c('div',{staticClass:\"item\"},[_c('h4',[_vm._v(\"确认密码\")]),_c('div',[_c('van-field',{attrs:{\"clearable\":\"\",\"type\":\"password\",\"left\":\"\",\"placeholder\":\"请再次输入密码\"},model:{value:(_vm.formData.password2),callback:function ($$v) {_vm.$set(_vm.formData, \"password2\", $$v)},expression:\"formData.password2\"}})],1)]),_c('div',{staticClass:\"footer\"},[_c('van-button',{class:_vm.isDisButton?'entityDisBtnDefault':'entityBtnDefault',staticStyle:{\"border\":\"none\"},attrs:{\"disabled\":_vm.isDisButton,\"type\":\"info\",\"size\":\"large\",\"loading\":_vm.loading},on:{\"click\":_vm.handleFrom}},[_vm._v(\"完成\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"setNewBox\">\n    <h2>更改密码</h2>\n    <div class=\"item\">\n      <h4>原始密码</h4>\n      <div>\n        <van-field\n          clearable\n          type=\"password\"\n          v-model=\"formData.password\"\n          left\n          placeholder=\"请输入原始密码\"\n        />\n      </div>\n    </div>\n    <div class=\"item\">\n      <h4>新密码</h4>\n      <div>\n        <van-field\n          clearable\n          type=\"password\"\n          v-model=\"formData.password1\"\n          left\n          placeholder=\"请输入新密码\"\n        />\n      </div>\n    </div>\n    <div class=\"item\">\n      <h4>确认密码</h4>\n      <div>\n        <van-field\n          clearable\n          type=\"password\"\n          v-model=\"formData.password2\"\n          left\n          placeholder=\"请再次输入密码\"\n        />\n      </div>\n    </div>\n    <div class=\"footer\">\n      <van-button\n        :disabled=\"isDisButton\"\n        style=\"border: none;\"\n        :class=\"isDisButton?'entityDisBtnDefault':'entityBtnDefault'\"\n        type=\"info\"\n        size=\"large\"\n        @click=\"handleFrom\"\n        :loading=\"loading\"\n      >完成</van-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from \"vuex\";\nimport { Toast } from \"vant\";\nimport formValidate from \"@/libs/validator\";\nimport { changePasswordapi } from \"@/api/user.js\";\nexport default {\n  data() {\n    const validatePassword = value => {\n      var myrey = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;\n      if (value == \"\") {\n        return \"原始密码不能为空\";\n      } else if (!myrey.test(value)) {\n        return \"请输入6~20位数字和字母组合\";\n      }\n    };\n    const validatePassword1 = value => {\n      var myrey = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;\n      if (value == \"\") {\n        return \"密码不能为空\";\n      } else if (!myrey.test(value)) {\n        return \"请输入6~20位数字和字母组合\";\n      }\n    };\n    const validatePassword2 = (value, data) => {\n      if (value == \"\") {\n        return \"请再次输入密码\";\n      } else if (value != data.password1) {\n        return \"两次输入密码不一致\";\n      }\n    };\n    return {\n      loading: false,\n      formData: {\n        password: \"\",\n        password1: \"\",\n        password2: \"\"\n      },\n      rules: {\n        password: [{ required: true, validate: validatePassword }],\n        password1: [{ required: true, validate: validatePassword1 }],\n        password2: [{ required: true, validate: validatePassword2 }]\n      }\n    };\n  },\n  methods: {\n    ...mapActions([\"loginOut\"]),\n    handleFrom() {\n      formValidate(this.formData, this.rules).then(val => {\n        if (val) {\n          const password = this.formData.password;\n          const password1 = this.formData.password1;\n          const username = this.username;\n          this.loading = true;\n          changePasswordapi(username, password1, password)\n            .then(() => {\n              this.loading = false;\n              Toast.success(\"密码修改成功\");\n              this.loginOut().then(() => {\n                this.$router.push({\n                  path: \"/login\"\n                });\n              });\n            })\n            .catch(err => {\n              this.$toast(err.data.error);\n              this.loading = false;\n            });\n        }\n      });\n    }\n  },\n  computed: {\n    username() {\n      return this.$store.state.user.userEmail;\n    },\n    isDisButton() {\n      return (\n        this.formData.password == \"\" ||\n        this.formData.password1 == \"\" ||\n        this.formData.password2 == \"\"\n      );\n    }\n  }\n};\n</script>\n\n<style scoped=\"scoped\" lang=\"less\">\n.setNewBox {\n  display: block;\n  height: 100%;\n  width: 100%;\n  background: #ffffff;\n  padding: 25.35px 9.75px;\n  box-sizing: border-box;\n  .item {\n    & > div {\n      border-bottom: 1px solid #c6cbd4;\n      margin-bottom: 11.25px;\n      .code {\n        font-size: 12px;\n        font-weight: 500;\n        color: rgba(75, 116, 255, 1);\n      }\n    }\n    .loading {\n      width: 100%;\n      height: 22.5px;\n      display: flex;\n      align-items: center;\n    }\n  }\n  .footer {\n    margin-top: 37.5px;\n    display: block;\n  }\n}\nh2,\nh4 {\n  margin: 0;\n  padding: 0;\n}\nh2 {\n  font-size: 20px;\n  font-weight: 500;\n  color: #020202;\n  margin-bottom: 19.5px;\n}\nh4 {\n  font-size: 12px;\n  font-weight: 400;\n  color: rgba(108, 114, 124, 1);\n  margin-bottom: 9.75px;\n}\n</style>\n","import mod from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePassword.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./changePassword.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./changePassword.vue?vue&type=template&id=2f25d99a&scoped=true&\"\nimport script from \"./changePassword.vue?vue&type=script&lang=js&\"\nexport * from \"./changePassword.vue?vue&type=script&lang=js&\"\nimport style0 from \"./changePassword.vue?vue&type=style&index=0&id=2f25d99a&scoped=scoped&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2f25d99a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}