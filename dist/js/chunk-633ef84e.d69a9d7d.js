(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-633ef84e"],{"0abd":function(e,t,n){"use strict";var s=n("f797"),i=n.n(s);i.a},"16be":function(e,t,n){(function(t,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function s(e){return"function"===typeof e}var i=void 0;i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var r=i,o=0,c=void 0,a=void 0,u=function(e,t){k[o]=e,k[o+1]=t,o+=2,2===o&&(a?a(S):j())};function h(e){a=e}function f(e){u=e}var l="undefined"!==typeof window?window:void 0,_=l||{},d=_.MutationObserver||_.WebKitMutationObserver,g="undefined"===typeof self&&"undefined"!==typeof t&&"[object process]"==={}.toString.call(t),b="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel;function p(){return function(){return t.nextTick(S)}}function v(){return"undefined"!==typeof c?function(){c(S)}:w()}function m(){var e=0,t=new d(S),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function y(){var e=new MessageChannel;return e.port1.onmessage=S,function(){return e.port2.postMessage(0)}}function w(){var e=setTimeout;return function(){return e(S,1)}}var k=new Array(1e3);function S(){for(var e=0;e<o;e+=2){var t=k[e],n=k[e+1];t(n),k[e]=void 0,k[e+1]=void 0}o=0}function O(){try{var e=Function("return this")().require("vertx");return c=e.runOnLoop||e.runOnContext,v()}catch(t){return w()}}var j=void 0;function C(e,t){var n=this,s=new this.constructor(x);void 0===s[T]&&V(s);var i=n._state;if(i){var r=arguments[i-1];u((function(){return K(i,s,r,n._result)}))}else $(n,s,e,t);return s}function R(e){var t=this;if(e&&"object"===typeof e&&e.constructor===t)return e;var n=new t(x);return N(n,e),n}j=g?p():d?m():b?y():void 0===l?O():w();var T=Math.random().toString(36).substring(2);function x(){}var E=void 0,A=1,P=2;function M(){return new TypeError("You cannot resolve a promise with itself")}function I(){return new TypeError("A promises callback cannot return that same promise.")}function L(e,t,n,s){try{e.call(t,n,s)}catch(i){return i}}function J(e,t,n){u((function(e){var s=!1,i=L(n,t,(function(n){s||(s=!0,t!==n?N(e,n):q(e,n))}),(function(t){s||(s=!0,F(e,t))}),"Settle: "+(e._label||" unknown promise"));!s&&i&&(s=!0,F(e,i))}),e)}function B(e,t){t._state===A?q(e,t._result):t._state===P?F(e,t._result):$(t,void 0,(function(t){return N(e,t)}),(function(t){return F(e,t)}))}function D(e,t,n){t.constructor===e.constructor&&n===C&&t.constructor.resolve===R?B(e,t):void 0===n?q(e,t):s(n)?J(e,t,n):q(e,t)}function N(t,n){if(t===n)F(t,M());else if(e(n)){var s=void 0;try{s=n.then}catch(i){return void F(t,i)}D(t,n,s)}else q(t,n)}function U(e){e._onerror&&e._onerror(e._result),H(e)}function q(e,t){e._state===E&&(e._result=t,e._state=A,0!==e._subscribers.length&&u(H,e))}function F(e,t){e._state===E&&(e._state=P,e._result=t,u(U,e))}function $(e,t,n,s){var i=e._subscribers,r=i.length;e._onerror=null,i[r]=t,i[r+A]=n,i[r+P]=s,0===r&&e._state&&u(H,e)}function H(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var s=void 0,i=void 0,r=e._result,o=0;o<t.length;o+=3)s=t[o],i=t[o+n],s?K(n,s,i,r):i(r);e._subscribers.length=0}}function K(e,t,n,i){var r=s(n),o=void 0,c=void 0,a=!0;if(r){try{o=n(i)}catch(u){a=!1,c=u}if(t===o)return void F(t,I())}else o=i;t._state!==E||(r&&a?N(t,o):!1===a?F(t,c):e===A?q(t,o):e===P&&F(t,o))}function W(e,t){try{t((function(t){N(e,t)}),(function(t){F(e,t)}))}catch(n){F(e,n)}}var X=0;function z(){return X++}function V(e){e[T]=X++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var G=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(x),this.promise[T]||V(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?q(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&q(this.promise,this._result))):F(this.promise,Y())}return e.prototype._enumerate=function(e){for(var t=0;this._state===E&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,s=n.resolve;if(s===R){var i=void 0,r=void 0,o=!1;try{i=e.then}catch(a){o=!0,r=a}if(i===C&&e._state!==E)this._settledAt(e._state,t,e._result);else if("function"!==typeof i)this._remaining--,this._result[t]=e;else if(n===se){var c=new n(x);o?F(c,r):D(c,e,i),this._willSettleAt(c,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(s(e),t)},e.prototype._settledAt=function(e,t,n){var s=this.promise;s._state===E&&(this._remaining--,e===P?F(s,n):this._result[t]=n),0===this._remaining&&q(s,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;$(e,void 0,(function(e){return n._settledAt(A,t,e)}),(function(e){return n._settledAt(P,t,e)}))},e}();function Q(e){return new G(this,e).promise}function Z(e){var t=this;return r(e)?new t((function(n,s){for(var i=e.length,r=0;r<i;r++)t.resolve(e[r]).then(n,s)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function ee(e){var t=this,n=new t(x);return F(n,e),n}function te(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ne(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var se=function(){function e(t){this[T]=z(),this._result=this._state=void 0,this._subscribers=[],x!==t&&("function"!==typeof t&&te(),this instanceof e?W(this,t):ne())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this,n=t.constructor;return s(e)?t.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):t.then(e,e)},e}();function ie(){var e=void 0;if("undefined"!==typeof n)e=n;else if("undefined"!==typeof self)e=self;else try{e=Function("return this")()}catch(i){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var s=null;try{s=Object.prototype.toString.call(t.resolve())}catch(i){}if("[object Promise]"===s&&!t.cast)return}e.Promise=se}return se.prototype.then=C,se.all=Q,se.race=Z,se.resolve=R,se.reject=ee,se._setScheduler=h,se._setAsap=f,se._asap=u,se.polyfill=ie,se.Promise=se,se}))}).call(this,n("eef6"),n("9edd"))},"1b78":function(e,t,n){},"2e56":function(e,t,n){var s;
/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */(function(){"use strict";function t(){}var i=t.prototype,r=this,o=r.EventEmitter;function c(e,t){var n=e.length;while(n--)if(e[n].listener===t)return n;return-1}function a(e){return function(){return this[e].apply(this,arguments)}}i.getListeners=function(e){var t,n,s=this._getEvents();if(e instanceof RegExp)for(n in t={},s)s.hasOwnProperty(n)&&e.test(n)&&(t[n]=s[n]);else t=s[e]||(s[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,t){var n,s=this.getListenersAsObject(e),i="object"===typeof t;for(n in s)s.hasOwnProperty(n)&&-1===c(s[n],t)&&s[n].push(i?t:{listener:t,once:!1});return this},i.on=a("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=a("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,t){var n,s,i=this.getListenersAsObject(e);for(s in i)i.hasOwnProperty(s)&&(n=c(i[s],t),-1!==n&&i[s].splice(n,1));return this},i.off=a("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var s,i,r=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!==typeof t||t instanceof RegExp){s=n.length;while(s--)r.call(this,t,n[s])}else for(s in t)t.hasOwnProperty(s)&&(i=t[s])&&("function"===typeof i?r.call(this,s,i):o.call(this,s,i));return this},i.removeEvent=function(e){var t,n=typeof e,s=this._getEvents();if("string"===n)delete s[e];else if(e instanceof RegExp)for(t in s)s.hasOwnProperty(t)&&e.test(t)&&delete s[t];else delete this._events;return this},i.removeAllListeners=a("removeEvent"),i.emitEvent=function(e,t){var n,s,i,r,o,c=this.getListenersAsObject(e);for(r in c)if(c.hasOwnProperty(r)){n=c[r].slice(0),i=n.length;while(i--)s=n[i],!0===s.once&&this.removeListener(e,s.listener),o=s.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,s.listener)}return this},i.trigger=a("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return r.EventEmitter=o,t},s=function(){return t}.call(r,n,r,e),void 0===s||(e.exports=s)}).call(this)},"77b8":function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"homeBox"},[n("div",{staticClass:"routerView theme"},[n("keep-alive",{attrs:{include:e.keepAliveList}},[n("router-view")],1)],1),n("BottomBar",{directives:[{name:"show",rawName:"v-show",value:e.showTab,expression:"showTab"}]})],1)},i=[],r=n("ae8c"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tabBarBox"},[n("van-tabbar",{attrs:{route:"","active-color":e.activeColor,"inactive-color":"#B7B7B7"}},e._l(e.dataList,(function(t,s){return n("van-tabbar-item",{key:s,attrs:{info:t.info?t.info:"",to:t.path},scopedSlots:e._u([{key:"icon",fn:function(e){return n("img",{attrs:{src:e.active?t.active:t.inactive}})}}],null,!0)},[n("span",{staticClass:"bottonTabText"},[e._v(e._s(t.text))])])})),1)],1)},c=[],a={computed:{dataList(){return this.$store.state.app.theme.tabBottoms},activeColor(){return this.$store.state.app.theme.color}}},u=a,h=(n("0abd"),n("4023")),f=Object(h["a"])(u,o,c,!1,null,"6a798096",null),l=f.exports,_=n("ba41"),d=n("66df"),g=n("8132"),b=n.n(g);n("c276");class p extends b.a{constructor(e){super(e),this.subscribeKeys=[],this.init()}init(){window.onbeforeunload=()=>{this.disconnect()},this.on("connect",e=>{console.log("连接成功",e)}),this.on("disconnect",e=>{console.log("断开连接",e)}),this.on("error",e=>{console.log("错误连接",e)}),this.connect()}addListeners(e,t){this.hasKey(e)||this.subscribeKeys.push(e),this.subscribe(e,t)}removeListeners(e,t){this.hasKey(e)&&(this.unsubscribe(e),this.subscribeKeys.splice(this.subscribeKeys.indexOf(e),1))}hasKey(e){return this.subscribeKeys.indexOf(e)>-1}}let v=null;const m=()=>new Promise((e,t)=>{null==v?Object(_["b"])().then(t=>{const n=t.data.data.access_token,s=t.data.data.timestamp,i=t.data.data.user;v=new p({url:d["b"],user:i,timestamp:s,token:n}),e(v)}):("disconnected"==v._status&&v.connect(),e(v))});var y=n("ea31"),w={components:{BottomBar:l},computed:{keepAliveList(){return this.$store.state.app.keepAliveList},showTab(){return!(!this.$route.meta||!this.$route.meta.showBottomTab)}},data(){return{transitionName:"slide-none",socketConent:null}},watch:{$route(e,t){document.title=e.meta.title}},methods:{...Object(r["b"])(["getUnRead"])},created(){this.$store.commit("SET_THEME",this.$store.state.user.usertype)},mounted(){let e=document.getElementsByTagName("body")[0];e.className=this.$store.state.app.className;let t=this.$store.state.user.ktv_id,n=this.$store.state.user.userID,s=this.$store.state.user.usertype;m().then(e=>{this.socketConent=e,"ktv_clerk"!=s?(this.getUnRead(),e.addListeners("msg:"+n,e=>{this.getUnRead()})):e.addListeners("package:"+t,e=>{let n={ktv_id_list:t,package_status:2};Object(y["b"])(n).then(e=>{this.$store.commit("setUndelivered",e.data.count)})})})},destroyed(){let e=document.getElementsByTagName("body")[0];e.className="themea",null!=this.socketConent&&this.socketConent.disconnect()}},k=w,S=(n("e897"),n("f346"),Object(h["a"])(k,s,i,!1,null,"5a976b34",null));t["default"]=S.exports},"798f":function(e,t,n){},8132:function(e,t,n){(function(t){var s=n("16be").Promise,i=n("2e56");function r(e,t){return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,t.prototype}function o(e,t){try{return e[t]}catch(n){return}}function c(e,t,n){for(var s=t||{},i=2,r=arguments.length;i<r;i++){var a=arguments[i];if(void 0!==a&&null!==a)for(var u in a){var h=o(a,u),f=o(s,u);if(h!==t&&void 0!==h)if(e&&"object"===typeof h&&null!==h)if(h instanceof Array)s[u]=c(e,f instanceof Array?f:[],h);else{var l="object"!==typeof f||f instanceof Array?{}:f;s[u]=c(e,l,h)}else s[u]=h}}return s}function a(e,t){return-1!==e.indexOf(t,e.length-t.length)}function u(e,t){return 0===e.lastIndexOf(t,0)}function h(e){return"/"===e.substring(e.length-1)&&(e=e.substring(0,e.length-1)),e}function f(e){return void 0!==e&&null!==e&&("string"===typeof e||e instanceof String)}function l(e){return Object.prototype.toString.call(e)===Object.prototype.toString.call([])}function _(e){return void 0!==e&&null!==e&&"function"===typeof e}function d(e,n){if(t.console){var s=t.console[e];_(s)&&s.apply(t.console,n)}}function g(e,t,n){var s=.5*Math.random(),i=t*Math.pow(2,e+1);return i>n&&(i=n),Math.floor((1-s)*i)}function b(e){return"error"in e&&null!==e.error&&""!==e.error}function p(e){this._sockJS=null,this._isSockJS=!1,this._status="disconnected",this._reconnect=!0,this._reconnecting=!1,this._transport=null,this._transportName=null,this._transportClosed=!0,this._messageId=0,this._clientID=null,this._subs={},this._lastMessageID={},this._messages=[],this._isBatching=!1,this._isAuthBatching=!1,this._authChannels={},this._numRefreshFailed=0,this._refreshTimeout=null,this._pingInterval=null,this._pongTimeout=null,this._retries=0,this._callbacks={},this._latency=null,this._latencyStart=null,this._config={sockJS:null,retry:1e3,maxRetry:2e4,timeout:5e3,info:"",resubscribe:!0,ping:!0,pingInterval:3e4,pongWaitTimeout:5e3,debug:!1,insecure:!1,server:null,privateChannelPrefix:"$",onTransportClose:null,transports:["websocket","xdr-streaming","xhr-streaming","eventsource","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],onRefresh:null,refreshEndpoint:"/centrifuge/refresh/",refreshHeaders:{},refreshParams:{},refreshData:{},refreshTransport:"ajax",refreshAttempts:null,refreshInterval:3e3,refreshFailed:null,onPrivateChannelAuth:null,authEndpoint:"/centrifuge/auth/",authHeaders:{},authParams:{},authTransport:"ajax"},e&&this.configure(e)}Object.create||(Object.create=function(){var e=function(){};return function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){if(!this)throw new TypeError('Array.prototype.indexOf() - can not convert "'+this+'" to object');var n=isFinite(t)?Math.floor(t):0,s=this instanceof Object?this:new Object(this),i=isFinite(s.length)?Math.floor(s.length):0;if(n>=i)return-1;if(n<0&&(n=Math.max(i+n,0)),void 0===e){do{if(n in s&&void 0===s[n])return n}while(++n<i)}else do{if(s[n]===e)return n}while(++n<i);return-1}),r(p,i),p._jsonpCallbacks={},p._jsonpTimeouts={},p._nextJSONPCallbackID=1;var v=p.prototype;v._jsonp=function(e,n,s,i,r){Object.keys(s).length>0&&this._log("Only AJAX request allows to send custom headers, it is not possible with JSONP."),this._debug("sending JSONP request to",e);var o="centrifuge_jsonp_"+p._nextJSONPCallbackID.toString();p._nextJSONPCallbackID++;var c=t.document,a=c.createElement("script"),u=setTimeout((function(){p._jsonpCallbacks[o]=function(){},r(!0,"timeout")}),3e3);p._jsonpCallbacks[o]=function(e){clearTimeout(u),r(!1,e),delete p._jsonpCallbacks[o]};var h="";for(var f in n)n.hasOwnProperty(f)&&(h.length>0&&(h+="&"),h+=encodeURIComponent(f)+"="+encodeURIComponent(n[f]));var l="Centrifuge._jsonpCallbacks['"+o+"']";a.src=this._config.authEndpoint+"?callback="+encodeURIComponent(l)+"&data="+encodeURIComponent(JSON.stringify(i))+"&"+h;var _=c.getElementsByTagName("head")[0]||c.documentElement;_.insertBefore(a,_.firstChild)},v._ajax=function(e,n,s,i,r){var o=this;o._debug("sending AJAX request to",e);var c=t.XMLHttpRequest?new t.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a="";for(var u in n)n.hasOwnProperty(u)&&(a.length>0&&(a+="&"),a+=encodeURIComponent(u)+"="+encodeURIComponent(n[u]));for(var h in a.length>0&&(a="?"+a),c.open("POST",e+a,!0),"withCredentials"in c&&(c.withCredentials=!0),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Content-Type","application/json"),s)s.hasOwnProperty(h)&&c.setRequestHeader(h,s[h]);return c.onreadystatechange=function(){if(4===c.readyState)if(200===c.status){var e,t=!1;try{e=JSON.parse(c.responseText),t=!0}catch(n){r(!0,"JSON returned was invalid, yet status code was 200. Data was: "+c.responseText)}t&&r(!1,e)}else o._log("Couldn't get auth info from application",c.status),r(!0,c.status)},setTimeout((function(){c.send(JSON.stringify(i))}),20),c},v._log=function(){d("info",arguments)},v._debug=function(){!0===this._config.debug&&d("debug",arguments)},v._websocketSupported=function(){return!("function"!==typeof WebSocket&&"object"!==typeof WebSocket)},v._sockjsEndpoint=function(){var e=this._config.url;return e=e.replace("ws://","http://").replace("wss://","https://"),e=h(e),a(this._config.url,"connection")||(e+="/connection"),e},v._rawWebsocketEndpoint=function(){var e=this._config.url;return e=e.replace("http://","ws://").replace("https://","wss://"),e=h(e),a(this._config.url,"connection/websocket")||(e+="/connection/websocket"),e},v._configure=function(e){if(this._debug("Configuring centrifuge object with",e),e||(e={}),this._config=c(!1,this._config,e),!this._config.url)throw"Missing required configuration parameter 'url' specifying server URL";if(!this._config.user&&""!==this._config.user){if(!this._config.insecure)throw"Missing required configuration parameter 'user' specifying user's unique ID in your application";this._debug("user not found but this is OK for insecure mode - anonymous access will be used"),this._config.user=""}if(!this._config.timestamp){if(!this._config.insecure)throw"Missing required configuration parameter 'timestamp'";this._debug("token not found but this is OK for insecure mode")}if(!this._config.token){if(!this._config.insecure)throw"Missing required configuration parameter 'token' specifying the sign of authorization request";this._debug("timestamp not found but this is OK for insecure mode")}if(this._config.url=h(this._config.url),a(this._config.url,"connection"))if(this._debug("client will connect to SockJS endpoint"),null!==this._config.sockJS)this._debug("SockJS explicitly provided in options"),this._sockJS=this._config.sockJS;else{if("undefined"===typeof SockJS)throw"include SockJS client library before Centrifuge javascript client library or provide SockJS object in options or use raw Websocket connection endpoint";this._debug("use globally defined SockJS"),this._sockJS=SockJS}else a(this._config.url,"connection/websocket")?this._debug("client will connect to raw Websocket endpoint"):(this._debug("client will detect connection endpoint itself"),null!==this._config.sockJS?(this._debug("SockJS explicitly provided in options"),this._sockJS=this._config.sockJS):"undefined"===typeof SockJS?this._debug("SockJS not found"):(this._debug("use globally defined SockJS"),this._sockJS=SockJS))},v._setStatus=function(e){this._status!==e&&(this._debug("Status",this._status,"->",e),this._status=e)},v._isDisconnected=function(){return"disconnected"===this._status},v._isConnecting=function(){return"connecting"===this._status},v._isConnected=function(){return"connected"===this._status},v._nextMessageId=function(){return++this._messageId},v._resetRetry=function(){this._debug("reset retries count to 0"),this._retries=0},v._getRetryInterval=function(){var e=g(this._retries,this._config.retry,this._config.maxRetry);return this._retries+=1,e},v._clearConnectedState=function(e){for(var t in this._clientID=null,this._callbacks)if(this._callbacks.hasOwnProperty(t)){var n=this._callbacks[t],s=n.errback;if(!s)continue;s(this._createErrorObject("disconnected","retry"))}for(var i in this._callbacks={},this._subs)if(this._subs.hasOwnProperty(i)){var r=this._subs[i];e?(r._isSuccess()&&r._triggerUnsubscribe(),r._setSubscribing()):r._setUnsubscribed()}this._config.resubscribe&&this._reconnect||(this._subs={})},v._send=function(e){0!==e.length&&(1===e.length&&(e=e[0]),this._debug("Send",e),this._transport.send(JSON.stringify(e)))},v._setupTransport=function(){var e=this;if(this._isSockJS=!1,null!==this._sockJS){var t={transports:this._config.transports};null!==this._config.server&&(t.server=this._config.server),this._isSockJS=!0,this._transport=new this._sockJS(this._sockjsEndpoint(),null,t)}else{if(!this._websocketSupported())return void this._debug("No Websocket support and no SockJS configured, can not connect");this._transport=new WebSocket(this._rawWebsocketEndpoint())}this._transport.onopen=function(){e._transportClosed=!1,e._isSockJS?(e._transportName=e._transport.transport,e._transport.onheartbeat=function(){e._restartPing()}):e._transportName="raw-websocket",e._resetRetry(),f(e._config.user)||e._log("user expected to be string"),f(e._config.info)||e._log("info expected to be string");var t={method:"connect",params:{user:e._config.user,info:e._config.info}};e._config.insecure||(t.params.timestamp=e._config.timestamp,t.params.token=e._config.token,f(e._config.timestamp)||e._log("timestamp expected to be string"),f(e._config.token)||e._log("token expected to be string")),e._addMessage(t),e._latencyStart=new Date},this._transport.onerror=function(t){e._debug("transport level error",t)},this._transport.onclose=function(t){e._transportClosed=!0;var n="connection closed",s=!0;if(t&&"reason"in t&&t.reason)try{var i=JSON.parse(t.reason);e._debug("reason is an advice object",i),n=i.reason,s=i.reconnect}catch(o){n=t.reason,e._debug("reason is a plain string",n),s="disconnect"!==n}if(null!==e._config.onTransportClose&&e._config.onTransportClose({event:t,reason:n,reconnect:s}),e._disconnect(n,s),!0===e._reconnect){e._reconnecting=!0;var r=e._getRetryInterval();e._debug("reconnect after "+r+" milliseconds"),setTimeout((function(){!0===e._reconnect&&e._connect.call(e)}),r)}},this._transport.onmessage=function(t){var n;n=JSON.parse(t.data),e._debug("Received",n),e._receive(n),e._restartPing()}},v._connect=function(e){this.isConnected()?this._debug("connect called when already connected"):"connecting"!==this._status&&(this._debug("start connecting"),this._setStatus("connecting"),this._clientID=null,this._reconnect=!0,e&&this.on("connect",e),this._setupTransport())},v._disconnect=function(e,t){if(!this.isDisconnected()){this._debug("disconnected:",e,t);var n=t||!1;!1===n&&(this._reconnect=!1),this._clearConnectedState(n),this.isDisconnected()||(this._setStatus("disconnected"),this._refreshTimeout&&clearTimeout(this._refreshTimeout),!1===this._reconnecting&&this.trigger("disconnect",[{reason:e,reconnect:n}])),this._transportClosed||this._transport.close()}},v._refreshFailed=function(){this._numRefreshFailed=0,this.isDisconnected()||this._disconnect("refresh failed",!1),null!==this._config.refreshFailed&&this._config.refreshFailed()},v._refresh=function(){var e=this;if(this._debug("refresh credentials"),0===e._config.refreshAttempts)return this._debug("refresh attempts set to 0, do not send refresh request at all"),void e._refreshFailed();null!==e._refreshTimeout&&clearTimeout(e._refreshTimeout);var t=function(t,n){if(!0===t)return e._debug("error getting connection credentials from refresh endpoint",n),e._numRefreshFailed++,e._refreshTimeout&&clearTimeout(e._refreshTimeout),null!==e._config.refreshAttempts&&e._numRefreshFailed>=e._config.refreshAttempts?void e._refreshFailed():void(e._refreshTimeout=setTimeout((function(){e._refresh.call(e)}),e._config.refreshInterval+Math.round(1e3*Math.random())));e._numRefreshFailed=0,e._config.user=n.user,e._config.timestamp=n.timestamp,"info"in n&&(e._config.info=n.info),e._config.token=n.token,e.isDisconnected()?(e._debug("credentials refreshed, connect from scratch"),e._connect()):(e._debug("send refreshed credentials"),e._addMessage({method:"refresh",params:{user:e._config.user,timestamp:e._config.timestamp,info:e._config.info,token:e._config.token}}))};if(null!==this._config.onRefresh){var n={};this._config.onRefresh(n,t)}else{var s=this._config.refreshTransport.toLowerCase();if("ajax"===s)this._ajax(this._config.refreshEndpoint,this._config.refreshParams,this._config.refreshHeaders,this._config.refreshData,t);else{if("jsonp"!==s)throw"Unknown refresh transport "+s;this._jsonp(this._config.refreshEndpoint,this._config.refreshParams,this._config.refreshHeaders,this._config.refreshData,t)}}},v._subscribe=function(e,t){var n=e.channel;if(n in this._subs||(this._subs[n]=e),this.isConnected()){e._setSubscribing(t);var s={method:"subscribe",params:{channel:n}};if(u(n,this._config.privateChannelPrefix))this._isAuthBatching?this._authChannels[n]=!0:(this.startAuthBatching(),this._subscribe(e),this.stopAuthBatching());else{var i=this._recover(n);!0===i&&(s.params.recover=!0,s.params.last=this._getLastID(n)),this._addMessage(s)}}else e._setNew()},v._unsubscribe=function(e){this.isConnected()&&this._addMessage({method:"unsubscribe",params:{channel:e.channel}})},v._getSub=function(e){var t=this._subs[e];return t||null},v._connectResponse=function(e){if(!this.isConnected())if(b(e))this.trigger("error",[{message:e}]);else{if(null!==this._latencyStart&&(this._latency=(new Date).getTime()-this._latencyStart.getTime(),this._latencyStart=null),!e.body)return;if(e.body.expires){var t=e.body.expired;if(t)return this._reconnecting=!0,this._disconnect("expired",!0),void this._refresh()}this._clientID=e.body.client,this._setStatus("connected");var n=this._reconnecting;this._reconnecting=!1,this._refreshTimeout&&clearTimeout(this._refreshTimeout);var s=this;if(e.body.expires&&(this._refreshTimeout=setTimeout((function(){s._refresh.call(s)}),1e3*e.body.ttl)),this._config.resubscribe){for(var i in this.startBatching(),this.startAuthBatching(),this._subs)if(this._subs.hasOwnProperty(i)){var r=this._subs[i];r._shouldResubscribe()&&this._subscribe(r,n)}this.stopAuthBatching(),this.stopBatching(!0)}this._restartPing(),this.trigger("connect",[{client:e.body.client,transport:this._transportName,latency:this._latency}])}},v._stopPing=function(){null!==this._pongTimeout&&(clearTimeout(this._pongTimeout),this._pongTimeout=null),null!==this._pingInterval&&(clearInterval(this._pingInterval),this._pingInterval=null)},v._startPing=function(){if(!(!0!==this._config.ping||this._config.pingInterval<=0)&&this.isConnected()){var e=this;this._pingInterval=setInterval((function(){e.isConnected()?(e.ping(),e._pongTimeout=setTimeout((function(){e._disconnect("no ping",!0)}),e._config.pongWaitTimeout)):e._stopPing()}),this._config.pingInterval)}},v._restartPing=function(){this._stopPing(),this._startPing()},v._disconnectResponse=function(e){if(b(e))this.trigger("error",[{message:e}]);else{var t=!1;"reconnect"in e.body&&(t=e.body.reconnect);var n="";"reason"in e.body&&(n=e.body.reason),this._disconnect(n,t)}},v._subscribeResponse=function(e){var t=e.body;if(null!==t){var n=t.channel,s=this._getSub(n);if(s&&s._isSubscribing())if(b(e))this.trigger("error",[{message:e}]),s._setSubscribeError(this._errorObjectFromMessage(e));else{var i=t.messages;if(i&&i.length>0)for(var r in i=i.reverse(),i)i.hasOwnProperty(r)&&this._messageResponse({body:i[r]});else"last"in t&&(this._lastMessageID[n]=t.last);var o=!1;"recovered"in t&&(o=t.recovered),s._setSubscribeSuccess(o)}}},v._unsubscribeResponse=function(e){var t=e.uid,n=e.body,s=n.channel,i=this._getSub(s);i&&(b(e)?this.trigger("error",[{message:e}]):t||i._setUnsubscribed(!0))},v._publishResponse=function(e){var t=e.uid,n=e.body;if(t in this._callbacks){var s=this._callbacks[t];if(delete this._callbacks[t],b(e)){var i=s.errback;if(!i)return;i(this._errorObjectFromMessage(e)),this.trigger("error",[{message:e}])}else{var r=s.callback;if(!r)return;r(n)}}},v._presenceResponse=function(e){var t=e.uid,n=e.body;if(t in this._callbacks){var s=this._callbacks[t];if(delete this._callbacks[t],b(e)){var i=s.errback;if(!i)return;i(this._errorObjectFromMessage(e)),this.trigger("error",[{message:e}])}else{var r=s.callback;if(!r)return;r(n)}}},v._historyResponse=function(e){var t=e.uid,n=e.body;if(t in this._callbacks){var s=this._callbacks[t];if(delete this._callbacks[t],b(e)){var i=s.errback;if(!i)return;i(this._errorObjectFromMessage(e)),this.trigger("error",[{message:e}])}else{var r=s.callback;if(!r)return;r(n)}}},v._joinResponse=function(e){var t=e.body,n=t.channel,s=this._getSub(n);s&&s.trigger("join",[t])},v._leaveResponse=function(e){var t=e.body,n=t.channel,s=this._getSub(n);s&&s.trigger("leave",[t])},v._messageResponse=function(e){var t=e.body,n=t.channel;this._lastMessageID[n]=t.uid;var s=this._getSub(n);s&&s.trigger("message",[t])},v._refreshResponse=function(e){if(this._refreshTimeout&&clearTimeout(this._refreshTimeout),b(e))this.trigger("error",[{message:e}]);else if(e.body.expires){var t=this,n=e.body.expired;if(n)return void(t._refreshTimeout=setTimeout((function(){t._refresh.call(t)}),t._config.refreshInterval+Math.round(1e3*Math.random())));this._clientID=e.body.client,t._refreshTimeout=setTimeout((function(){t._refresh.call(t)}),1e3*e.body.ttl)}},v._dispatchMessage=function(e){if(void 0!==e&&null!==e){var t=e.method;if(t)switch(t){case"connect":this._connectResponse(e);break;case"disconnect":this._disconnectResponse(e);break;case"subscribe":this._subscribeResponse(e);break;case"unsubscribe":this._unsubscribeResponse(e);break;case"publish":this._publishResponse(e);break;case"presence":this._presenceResponse(e);break;case"history":this._historyResponse(e);break;case"join":this._joinResponse(e);break;case"leave":this._leaveResponse(e);break;case"ping":break;case"refresh":this._refreshResponse(e);break;case"message":this._messageResponse(e);break;default:this._debug("dispatch: got message with unknown method"+t);break}else this._debug("dispatch: got message with empty method")}else this._debug("dispatch: got undefined or null message")},v._receive=function(e){if(l(e))for(var t in e)e.hasOwnProperty(t)&&this._dispatchMessage(e[t]);else Object.prototype.toString.call(e)===Object.prototype.toString.call({})&&this._dispatchMessage(e)},v._flush=function(){var e=this._messages.slice(0);this._messages=[],this._send(e)},v._ping=function(){this._addMessage({method:"ping"})},v._recover=function(e){return e in this._lastMessageID},v._getLastID=function(e){var t=this._lastMessageID[e];return t?(this._debug("last uid found and sent for channel",e),t):(this._debug("no last uid found for channel",e),"")},v._createErrorObject=function(e,t){var n={error:e};return t&&(n.advice=t),n},v._errorObjectFromMessage=function(e){return this._createErrorObject(e.error,e.advice)},v._registerCall=function(e,t,n){var s=this;this._callbacks[e]={callback:t,errback:n},setTimeout((function(){delete s._callbacks[e],_(n)&&n(s._createErrorObject("timeout","retry"))}),this._config.timeout)},v._addMessage=function(e){var t=""+this._nextMessageId();return e.uid=t,!0===this._isBatching?this._messages.push(e):this._send([e]),t},v.getClientId=function(){return this._clientID},v.isConnected=v._isConnected,v.isDisconnected=v._isDisconnected,v.configure=function(e){this._configure.call(this,e)},v.connect=v._connect,v.disconnect=function(){this._disconnect("client",!1)},v.ping=v._ping,v.startBatching=function(){this._isBatching=!0},v.stopBatching=function(e){e=e||!1,this._isBatching=!1,!0===e&&this.flush()},v.flush=function(){this._flush()},v.startAuthBatching=function(){this._isAuthBatching=!0},v.stopAuthBatching=function(){var e,t;this._isAuthBatching=!1;var n=this._authChannels;this._authChannels={};var s=[];for(t in n)if(n.hasOwnProperty(t)){var i=this._getSub(t);if(!i)continue;s.push(t)}if(0!==s.length){var r={client:this.getClientId(),channels:s},o=this,c=function(n,i){if(!0!==n){var r;if(i.channels&&l(i.channels))for(e in r={},i.channels){var c=i.channels[e];c.channel&&(r[c.channel]=c)}else r=i;var a=!1;for(e in o._isBatching||(o.startBatching(),a=!0),s)if(s.hasOwnProperty(e)){t=s[e];var u=r[t];if(!u){o._subscribeResponse({error:"channel not found in authorization response",advice:"fix",body:{channel:t}});continue}if(u.status&&200!==u.status)o._subscribeResponse({error:u.status,body:{channel:t}});else{var h={method:"subscribe",params:{channel:t,client:o.getClientId(),info:u.info,sign:u.sign}},f=o._recover(t);!0===f&&(h.params.recover=!0,h.params.last=o._getLastID(t)),o._addMessage(h)}}a&&o.stopBatching(!0)}else for(e in o._debug("authorization request failed"),s)s.hasOwnProperty(e)&&(t=s[e],o._subscribeResponse({error:"authorization request failed",advice:"fix",body:{channel:t}}))};if(null!==this._config.onPrivateChannelAuth)this._config.onPrivateChannelAuth({data:r},c);else{var a=this._config.authTransport.toLowerCase();if("ajax"===a)this._ajax(this._config.authEndpoint,this._config.authParams,this._config.authHeaders,r,c);else{if("jsonp"!==a)throw"Unknown private channel auth transport "+a;this._jsonp(this._config.authEndpoint,this._config.authParams,this._config.authHeaders,r,c)}}}},v.subscribe=function(e,t){if(arguments.length<1)throw"Illegal arguments number: required 1, got "+arguments.length;if(!f(e))throw"Illegal argument type: channel must be a string";if(!this._config.resubscribe&&!this.isConnected())throw"Can not only subscribe in connected state when resubscribe option is off";var n=this._getSub(e);if(null!==n)return n._setEvents(t),n._isUnsubscribed()&&n.subscribe(),n;var s=new O(this,e,t);return this._subs[e]=s,s.subscribe(),s};var m=0,y=1,w=2,k=3,S=4;function O(e,t,n){this.channel=t,this._centrifuge=e,this._setEvents(n),this._status=m,this._error=null,this._isResubscribe=!1,this._ready=!1,this._promise=null,this._noResubscribe=!1,this._initializePromise()}r(O,i);var j=O.prototype;j._initializePromise=function(){this._ready=!1;var e=this;this._promise=new s((function(t,n){e._resolve=function(n){e._ready=!0,t(n)},e._reject=function(t){e._ready=!0,n(t)}}))},j._setEvents=function(e){if(e)if(_(e))this.on("message",e);else if(Object.prototype.toString.call(e)===Object.prototype.toString.call({}))for(var t=["message","join","leave","unsubscribe","subscribe","error"],n=0,s=t.length;n<s;n++){var i=t[n];i in e&&this.on(i,e[i])}},j._isNew=function(){return this._status===m},j._isUnsubscribed=function(){return this._status===S},j._isSubscribing=function(){return this._status===y},j._isReady=function(){return this._status===w||this._status===k},j._isSuccess=function(){return this._status===w},j._isError=function(){return this._status===k},j._setNew=function(){this._status=m},j._setSubscribing=function(e){this._isResubscribe=e||!1,!0===this._ready&&this._initializePromise(),this._status=y},j._setSubscribeSuccess=function(e){if(this._status!==w){this._status=w;var t=this._getSubscribeSuccessContext(e);this.trigger("subscribe",[t]),this._resolve(t)}},j._setSubscribeError=function(e){if(this._status!==k){this._status=k,this._error=e;var t=this._getSubscribeErrorContext();this.trigger("error",[t]),this._reject(t)}},j._triggerUnsubscribe=function(){this.trigger("unsubscribe",[{channel:this.channel}])},j._setUnsubscribed=function(e){this._status!==S&&(this._status=S,!0===e&&(this._noResubscribe=!0,delete this._centrifuge._lastMessageID[this.channel]),this._triggerUnsubscribe())},j._shouldResubscribe=function(){return!this._noResubscribe},j._getSubscribeSuccessContext=function(e){return{channel:this.channel,isResubscribe:this._isResubscribe,recovered:e}},j._getSubscribeErrorContext=function(){var e=this._error;return e.channel=this.channel,e.isResubscribe=this._isResubscribe,e},j.ready=function(e,t){this._ready&&(this._isSuccess()?e(this._getSubscribeSuccessContext()):t(this._getSubscribeErrorContext()))},j.subscribe=function(){if(this._status!==w)return this._noResubscribe=!1,this._centrifuge._subscribe(this),this},j.unsubscribe=function(){this._setUnsubscribed(!0),this._centrifuge._unsubscribe(this)},j.publish=function(e){var t=this;return new s((function(n,s){t._isUnsubscribed()?s(t._centrifuge._createErrorObject("subscription unsubscribed","fix")):t._promise.then((function(){if(t._centrifuge.isConnected()){var i=t._centrifuge._addMessage({method:"publish",params:{channel:t.channel,data:e}});t._centrifuge._registerCall(i,n,s)}else s(t._centrifuge._createErrorObject("disconnected","retry"))}),(function(e){s(e)}))}))},j.presence=function(){var e=this;return new s((function(t,n){e._isUnsubscribed()?n(e._centrifuge._createErrorObject("subscription unsubscribed","fix")):e._promise.then((function(){if(e._centrifuge.isConnected()){var s=e._centrifuge._addMessage({method:"presence",params:{channel:e.channel}});e._centrifuge._registerCall(s,t,n)}else n(e._centrifuge._createErrorObject("disconnected","retry"))}),(function(e){n(e)}))}))},j.history=function(){var e=this;return new s((function(t,n){e._isUnsubscribed()?n(e._centrifuge._createErrorObject("subscription unsubscribed","fix")):e._promise.then((function(){if(e._centrifuge.isConnected()){var s=e._centrifuge._addMessage({method:"history",params:{channel:e.channel}});e._centrifuge._registerCall(s,t,n)}else n(e._centrifuge._createErrorObject("disconnected","retry"))}),(function(e){n(e)}))}))},e.exports=p}).call(this,n("9edd"))},e897:function(e,t,n){"use strict";var s=n("798f"),i=n.n(s);i.a},ea31:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var s=n("66df");const i=e=>s["a"].request({url:"/order/info",params:e,method:"get"}),r=e=>{let t=e.id;return delete e.id,s["a"].request({url:"/order/package/info/"+t,data:e,method:"patch"})},o=e=>s["a"].request({url:"/order/info/"+e,method:"get"})},f346:function(e,t,n){"use strict";var s=n("1b78"),i=n.n(s);i.a},f797:function(e,t,n){}}]);
//# sourceMappingURL=chunk-633ef84e.d69a9d7d.js.map