(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f5392ef"],{"13e7":function(t,s,e){},"4ada":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"contractBox"},[e("div",{staticClass:"title"},[e("span",[e("span",[t._v(t._s(t.billingText))]),e("span",[e("van-switch",{attrs:{value:t.checked,size:"20px","active-color":t.color},on:{input:t.onInput}})],1)]),e("span",[e("span",{on:{click:t.goAccountRecord}},[t._v("计费记录")]),e("a",{staticStyle:{color:"#0082FF"},on:{click:t.popupBtn}},[t._v("筛选")])])]),e("div",{ref:"scroll",staticClass:"contentBox"},[e("PageList",{ref:"pageList",attrs:{params:t.params,getData:t.getContractList,noListText:"暂无合同信息"},scopedSlots:t._u([{key:"default",fn:function(s){return t._l(s.dataList,(function(t,s){return e("ContractListItem",{key:s,attrs:{data:t}})}))}}])})],1),e("van-popup",{style:{width:"280px",height:"100%"},attrs:{position:"right"},on:{close:t.popupCloseEvent},model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[e("div",{staticClass:"popupRightBox"},[e("div",{staticClass:"content"},t._l(t.popupData,(function(s,a){return e("div",{key:a,staticClass:"box"},[e("span",{staticClass:"boxTitle"},[t._v(t._s(s.title))]),e("span",{staticClass:"boxList"},t._l(s.list,(function(a,o){return e("span",{key:o,class:{isSelected:t.popupValue[s.key]==a.id},on:{click:function(e){return t.selectedBtn(s.key,a.id)}}},[t._v(t._s(a.text))])})),0)])})),0),e("div",{staticClass:"bottom"},[e("span",{on:{click:function(s){t.show=!1}}},[t._v("取消")]),e("span",{staticClass:"a",on:{click:t.searchBtn}},[t._v("确定")])])])])],1)},o=[],c=e("f121"),n=e("3382"),i=e("1777"),l=e("71a5"),r=e("b6f9"),p={name:"contract",mixins:[r["b"]],components:{PageList:n["a"],ContractListItem:i["a"]},computed:{color(){return this.$store.state.app.theme.color},checked(){return 1==this.$store.state.ktv.billingState},billingText(){return 1==this.$store.state.ktv.billingState?"开始计费":"停止计费"}},data(){return{params:{ktv:this.$store.state.ktv.ktvID},getContractList:l["l"],screen:!1,show:!1,popupValue:{contract_type:0,contract_statue:0,approval_statue:0},searchValue:{contract_type:0,contract_statue:0,approval_statue:0},popupData:c["a"].ktv_contract_data}},watch:{searchValue:{handler(t){let s=!1;Object.keys(t).map(e=>{0!=t[e]&&(s=!0)}),this.screen=s},deep:!0}},methods:{goAccountRecord(){this.$router.push({name:"accountRecord"})},popupCloseEvent(){Object.assign(this.popupValue,this.searchValue)},searchBtn(){Object.assign(this.searchValue,this.popupValue),console.log(this.searchValue),this.show=!1,this.params={ktv:this.$store.state.ktv.ktvID,type:0==this.searchValue.contract_type?"":this.searchValue.contract_type,state:0==this.searchValue.contract_statue?"":this.searchValue.contract_statue,approve_state:0==this.searchValue.approval_statue?"":this.searchValue.approval_statue},this.$nextTick(()=>{this.$refs.pageList.onReload()})},selectedBtn(t,s){console.log(t,s),this.popupValue[t]=s},onInput(t){let s="计费开关",e=null;e=t?"是否开启计费?":"是否停止计费?",this.$dialog.confirm({title:s,message:e,confirmButtonColor:this.$store.state.app.theme.color,beforeClose:this.startChargingBtn})},startChargingBtn(t,s){let e=this.checked?2:1;if("confirm"===t){let t={contract:{billing_state:e}};Object(l["d"])(t,this.$store.state.ktv.ktvID).then(t=>{console.log(e),this.$store.commit("setBillingState",e),s(),this.$toast("状态修改成功")}).catch(t=>{s(),console.log(t);let e="操作失败！！！";400==t.status&&(e=t.data[0]),this.$toast(e)})}else s()},popupBtn(){this.show=!0}}},u=p,h=(e("5636"),e("2877")),v=Object(h["a"])(u,a,o,!1,null,"b721d2c8",null);s["default"]=v.exports},5636:function(t,s,e){"use strict";var a=e("13e7"),o=e.n(a);o.a}}]);
//# sourceMappingURL=chunk-2f5392ef.4c98babb.js.map